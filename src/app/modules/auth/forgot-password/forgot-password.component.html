<div class="flex flex-col flex-row items-center justify-center flex-auto min-w-0">
    <div class="w-full max-w-sm p-8 mx-4 my-8 bg-card rounded-3xl shadow sm:p-10">
        <div class="w-full">
            <div class="w-12">
                <img src="assets/images/logo/logo.svg">
            </div>

            <ng-container *ngIf="!requestSuccessful">
                <div class="mt-8 text-4xl font-extrabold tracking-tight leading-tight">¿Olvidaste tu contraseña?</div>
                <div class="mt-0.5 font-medium">Ingresa tu usuario para restablecerla</div>
            </ng-container>
            <ng-container *ngIf="requestSuccessful">
                <div class="mt-8 text-4xl font-extrabold tracking-tight leading-tight">¡Solicitud enviada!</div>
            </ng-container>

            <fuse-alert class="mt-8" *ngIf="showAlert" [appearance]="'outline'" [showIcon]="true" [type]="alert.type"
                [@shake]="alert.type === 'error'">
                {{alert.message}}
            </fuse-alert>

            <div *ngIf="requestSuccessful"
                class="w-full text-center flex justify-center mt-4 font-medium text-secondary">
                <ng-container *ngIf="countdown > 0">
                    Redirigiendo a inicio de sesión en {{countdown | i18nPlural: countdownMapping }}
                </ng-container>
                <ng-container *ngIf="countdown === 0">
                    Estás siendo redirigido...
                </ng-container>
            </div>

            <form class="mt-8" [formGroup]="forgotPasswordForm" #forgotPasswordNgForm="ngForm"
                *ngIf="!requestSuccessful">
                <mat-form-field appearance="outline" class="w-full">
                    <mat-label>Usuario</mat-label>
                    <input id="username" matInput [formControlName]="'username'">
                    <mat-error *ngIf="forgotPasswordForm.get('username').hasError('required')">
                        El usuario es requerido.
                    </mat-error>
                </mat-form-field>

                <button class="fuse-mat-button-large w-full" mat-flat-button [color]="'primary'"
                    [disabled]="forgotPasswordForm.disabled" (click)="sendResetLink()">
                    <span *ngIf="!forgotPasswordForm.disabled">
                        Restablecer Contraseña
                    </span>
                    <mat-progress-spinner *ngIf="forgotPasswordForm.disabled" [diameter]="24"
                        [mode]="'indeterminate'"></mat-progress-spinner>
                </button>
            </form>

            <div class="mt-8 w-full flex justify-center text-md font-medium text-secondary">
                <a [routerLink]="['/sign-in']">
                    <span>Volver a</span>
                    <span class="ml-1 text-primary-500 hover:underline">Iniciar Sesión
                    </span>
                </a>
            </div>
        </div>
    </div>
</div>